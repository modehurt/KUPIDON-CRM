"""
–ü—Ä–æ—Å—Ç–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å WhatsApp –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
"""

import urllib.request
import json
import socket

def check_current_ip():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ IP –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏"""
    print("üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–π IP...")
    try:
        response = urllib.request.urlopen('https://ipapi.co/json/')
        data = json.loads(response.read().decode())
        
        print(f"\nüìç –í–∞—à–µ —Ç–µ–∫—É—â–µ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:")
        print(f"   IP: {data.get('ip')}")
        print(f"   –°—Ç—Ä–∞–Ω–∞: {data.get('country_name')} ({data.get('country')})")
        print(f"   –ì–æ—Ä–æ–¥: {data.get('city')}")
        print(f"   –ü—Ä–æ–≤–∞–π–¥–µ—Ä: {data.get('org')}")
        
        if data.get('country') == 'RU':
            print("\n   ‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –û–±–Ω–∞—Ä—É–∂–µ–Ω —Ä–æ—Å—Å–∏–π—Å–∫–∏–π IP!")
            print("   WhatsApp –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –†–æ—Å—Å–∏–∏.")
            return False
        return True
    except Exception as e:
        print(f"   ‚ùå –û—à–∏–±–∫–∞: {e}")
        return None

def check_whatsapp_availability():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ WhatsApp —Å–µ—Ä–≤–µ—Ä–æ–≤"""
    print("\nüåê –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å WhatsApp...")
    
    hosts = [
        ('web.whatsapp.com', 443),
        ('api.whatsapp.com', 443),
        ('www.whatsapp.com', 443)
    ]
    
    results = []
    for host, port in hosts:
        try:
            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            sock.settimeout(5)
            result = sock.connect_ex((host, port))
            sock.close()
            
            if result == 0:
                print(f"   ‚úÖ {host}:{port} - –¥–æ—Å—Ç—É–ø–µ–Ω")
                results.append(True)
            else:
                print(f"   ‚ùå {host}:{port} - –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω")
                results.append(False)
        except:
            print(f"   ‚ùå {host}:{port} - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω")
            results.append(False)
    
    return any(results)

def print_recommendations():
    """–í—ã–≤–æ–¥ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π"""
    print("\nüí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –†–ï–®–ï–ù–ò–Ø –ü–†–û–ë–õ–ï–ú–´:")
    print("\n1. –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï (–¥–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞):")
    print("   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VPN (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ï–≤—Ä–æ–ø–∞ –∏–ª–∏ –°–®–ê)")
    print("   ‚Ä¢ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –º–æ–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥—Ä—É–≥–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞")
    print("   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏-–±—Ä–∞—É–∑–µ—Ä (Tor Browser)")
    
    print("\n2. –ü–û–°–¢–û–Ø–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï (–¥–ª—è –±–æ—Ç–∞):")
    print("   ‚Ä¢ –ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å VPS –≤ –ï–≤—Ä–æ–ø–µ ($5-10/–º–µ—Å—è—Ü):")
    print("     - DigitalOcean (–ì–µ—Ä–º–∞–Ω–∏—è, –ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã)")
    print("     - Hetzner (–ì–µ—Ä–º–∞–Ω–∏—è)")
    print("     - Vultr (–º–Ω–æ–∂–µ—Å—Ç–≤–æ –ª–æ–∫–∞—Ü–∏–π)")
    print("   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–∏—Å—ã")
    print("   ‚Ä¢ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSH-—Ç—É–Ω–Ω–µ–ª—å —á–µ—Ä–µ–∑ VPS")
    
    print("\n3. –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –í–ê–†–ò–ê–ù–¢–´:")
    print("   ‚Ä¢ WhatsApp Business API (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π, –Ω–æ –ø–ª–∞—Ç–Ω—ã–π)")
    print("   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã-–ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∏ (Twilio, MessageBird)")
    print("   ‚Ä¢ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –±–æ—Ç–∞ –Ω–∞ –∑–∞—Ä—É–±–µ–∂–Ω–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ")
    
    print("\n4. –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò:")
    print("   ‚Ä¢ WhatsApp –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ IP-–∞–¥—Ä–µ—Å–∞–º")
    print("   ‚Ä¢ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π")
    print("   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–∞–∫–∂–µ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã")
    print("   ‚Ä¢ –ß–∞—Å—Ç—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –æ–¥–Ω–æ–≥–æ IP –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –±–∞–Ω—É")

def main():
    print("=" * 60)
    print("–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–´ –° WHATSAPP")
    print("=" * 60)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º IP
    ip_ok = check_current_ip()
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
    whatsapp_ok = check_whatsapp_availability()
    
    # –í—ã–≤–æ–¥–∏–º –∏—Ç–æ–≥
    print("\n" + "=" * 60)
    print("–ò–¢–û–ì–û–í–´–ô –î–ò–ê–ì–ù–û–ó:")
    print("=" * 60)
    
    if ip_ok is False:
        print("\n‚ùå –ü–†–û–ë–õ–ï–ú–ê –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ê!")
        print("   –í–∞—à —Ä–æ—Å—Å–∏–π—Å–∫–∏–π IP –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è WhatsApp.")
        print("   –≠—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –ø–æ—á–µ–º—É —É –∑–∞–∫–∞–∑—á–∏–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç QR-–∫–æ–¥.")
    elif not whatsapp_ok:
        print("\n‚ùå WhatsApp –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —Å —Ç–µ–∫—É—â–µ–≥–æ IP!")
        print("   –í–æ–∑–º–æ–∂–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏–ª–∏ —Å—Ç—Ä–∞–Ω—ã.")
    else:
        print("\n‚úÖ WhatsApp –¥–æ—Å—Ç—É–ø–µ–Ω —Å —Ç–µ–∫—É—â–µ–≥–æ IP.")
        print("   –ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–∞—Ö.")
    
    # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    print_recommendations()
    
    print("\n" + "=" * 60)
    print("–î–ª—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:")
    print("pip install -r requirements.txt")
    print("=" * 60)

if __name__ == "__main__":
    main()